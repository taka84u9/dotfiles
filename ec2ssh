path "#{ENV['HOME']}/.ssh/config"
aws_keys(
  default: {
    access_key_id: ENV['AWS_ACCESS_KEY_ID'],
    secret_access_key: ENV['AWS_SECRET_ACCESS_KEY'],
  }
)
regions ENV['AWS_REGION']

# Ignore unnamed instances
reject {|instance| !instance.tags['Name'] }

# You can use methods of AWS::EC2::Instance.
# See http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/EC2/Instance.html
host_line <<EOS
Host <%= tags['Name'] %>
  HostName <%= ip_address %>
  Port <%= ENV['INCREMENTS_HOST_PORT'] %>
  User ec2-user
  IdentityFile ~/.ssh/<%= ENV['INCREMENTS_SSH_KEY_NAME'] %>
EOS

# vim: set filetype=ruby :
